---
layout: post
title: "Reverse Engineering of an EUV spectrometer"
date: 2017-07-04
categories:
  - Work
description: 
image: https://raw.githubusercontent.com/icfaust/icfaust.github.io/master/_screenshots/SPRED_13.2.png
image-sm: https://raw.githubusercontent.com/icfaust/icfaust.github.io/master/_screenshots/SPRED_13.2.png
---
The SPRED spectrometer used on the <a href="http://www.ipp.mpg.de/ippcms/de/pr/forschung/asdex/index">ASDEX-Upgrade tokamak</a> at the <a href="http://www.ipp.mpg.de/">Max-Planck Institute for Plasma Physics in Garching</a> is a work-horse spectrometer for finding impurities in the plasma. Built by a now-defunct exterior firm, the angle of the grating (critical for the proper scattering the light) became misaligned over its long operational lifetime.  It became my job to understand this spectrometer and return it to operation as best I could.

Impurities are defined as elements in the plasma outside the main atomic species (which is often an isotope of hydrogen). SPRED stands for Survey, Poor Resolution, Extended Domain which defines a wide, generally uncharacterized wavelength space. These other impurity elements are heavier with more protons and consequently have tighter bonds with the orbiting electrons.  High temperature plasmas will collide with bound electrons which can change their energy level or liberate them entirely.  These electrons will transit various energy levels leading to high energy photons different than those emitted by hydrogen.

This spectrometer has existed on the ASDEX-Upgrade from the beginning of its operation in 1991.  It and many others like it elsewhere derive from the original built in 1982 by <a href="https://directory.engr.wisc.edu/ep/Faculty/Fonck_Raymond/">Professor Fonck</a> at Princeton for the <a href="https://en.wikipedia.org/wiki/Princeton_Large_Torus">PLT tokamak</a>.  A specially designed grating preferentially reflects and focuses higher energy photons (light) while discarding other light wavelengths.  The SPRED spectrometer measures impurity line emission in what is known as the 'Extreme UltraViolet' (EUV) or the 'Vacuum UltraViolet' (VUV) range using two separate cameras and gratings. These ultraviolet photons are more similar to X-rays than the UV rays which damage our skin in the sunlight. They cannot penetrate deeply through most materials or gasses (hence the name vacuum UV), and their measurment requires special detectors (deep-depletion/ back-thinned CCDs or MCPS) placed under vacuum.

This project in total was a tough problem as it had the following large issues:  it had no major documentation of its designs (outside the specification of the gratings), there was no way of accurately calibrating the grating angle in place, the spectrometer is one-of-a-kind, and the system could only be fully verified for operation after complete installation at the very end (i.e. under vacuum).  These problems were systematically retired through the following steps:

<ul>
  <li>Analysis of previous operation</li>
  <li>Reverse engineering the spectrometer with minimal disassembly</li>
  <li>Designing and implementing a system for angluar calibration of a EUV/VUV grating</li>
  <li>Designing and building fixtures for in-place verification</li>
  <li>Analysis of spectrometer operation</li>
</ul>

<h3> Analysis of previous operation</h3>

 In my case, the ASDEX-Upgrade SPRED spectrometer had been designed and built by an outside German company, which was supposed to give over the design drawings per contract. However, this company did not comply with this after the delivery and installation of the spectrometer. The spectrometer operated as designed for over 20 years without major issue with the original components.  However, at some period of time, the wavelength being measured began to change. A <a href="https://edoc.ub.uni-muenchen.de/18745/">student thesis</a> around this time was able to correct for this issue and still yield viable results.  The previous micro channel plate (MCP) system used for measurement was replaced by more modern intensified CCDs which have become the norm for these styles of measurements.

Later a the change in the angle of the second grating was sufficient as to completely ruin its ability to properly record useful spectra. At the time it was not known that the angle was the cause in the failure, so attempts were made to diagnose the issue. Due to the relatively bullet-proof nature of its operation, it had been minimally opened for inspection during its years of operation. A new CCD camera was purchased to replace the old MCP and it was finally opened to inspect its interior.  

<h3>Reverse engineering the spectrometer without complete disassembly</h3>

Reverse engineering of products, processes and codes have become more and more commonplace worldwide.  Often considered malicious, such engineering is can actually be beneficial is restarting and recovering previously used methods and understanding.  A great example from recent memory is the possible return of the American F-1 rocket engine for possible use by NASA in the STS program.  The shift in the American program to other fuels left little hands-on expertise with hydrocarbon-based systems, and a team by NASA set out to <a href="https://arstechnica.com/science/2013/04/how-nasa-brought-the-monstrous-f-1-moon-rocket-back-to-life/">reverse engineer it</a>. Accurate calibration of the spectrometer 


<h3>Designing and implementing a system for angluar calibration of a EUV/VUV grating</h3>

  <!-- Simplified problem picture -->
  
  <!-- Image of CATIA and final product  -->

  <!--  -->
  
<h3>Fixtures for in-place verification</h3>

  <!-- Picture exterior with fixture -->
  
  <!-- Fully installed picture yep -->

<h3>Monte Carlo circle placement</h3>

<h3>Analysis of spectrometer operation</h3>

  <!-- Spectra Image (binned) yep -->

  <figure>
    <img src="https://raw.githubusercontent.com/icfaust/icfaust.github.io/master/_screenshots/SCJ_1D_He_calib_filtered_20_10_17.png" alt="Binned CCD readout of PIXIS-X0 100B in Helium plasma (SCJ)"/>
    <figcaption> Temporary.</figcaption>
  </figure>


  <!-- Spectra Image (full) yep -->

  <figure>
    <img src="https://raw.githubusercontent.com/icfaust/icfaust.github.io/master/_screenshots/SCJ_2D_He_calib_filtered_20_10_17.png" alt="Full CCD readout of PIXIS-X0 100B in Helium plasma (SCJ)"/>
    <figcaption> Temporary.</figcaption>
  </figure>




  <!-- WHAT IS THE ANGLE? -->
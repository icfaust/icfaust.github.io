---
layout: post
title: "Raspberry Pi Cameras for Tokamaks"
date: 2017-07-07
categories:
  - Side-Projects
description: 
image: https://raw.githubusercontent.com/icfaust/icfaust.github.io/master/_screenshots/1160902011-frames-21.jpg
image-sm: https://raw.githubusercontent.com/icfaust/icfaust.github.io/master/_screenshots/1160902011-frames-21.jpg
---
I designed and built equipment necessesary for Raspberry Pi Cameras to operate in the difficult environment of tokamaks. These cameras faced high magnetic fields, intense radiation bombardment, and substantial heat excursions. These simple and low-cost systems were able to outperform similar older systems at a dramatically reduced price with simpler implementation.  While the operation of the Raspberry Pi camera is well-documented and straight-forward, this new equipment interfaced with the computer, electrical and mechanical systems of the Alcator C-Mod tokamak.

This required the following:

<ul>
  <li>Coding an interface with the experimental data system</li>
  <li>Design and manufacture of camera mounting structure</li>
  <li>Optimization of the optics for individual views</li>
  <li>Isolation of the electrical triggering</li>
  <li>Placing power supplies away from high magnetic fields</li>
</ul>

The end result of this work can be seen in the spactacular conclusion of the plasmas (known as a 'disruption') shown both in the video (which I uploaded to Youtube) and the introductory image at the top of the page. These highlight the camera's robustness and exhibits the ability of such simple systems to collect such unique and interesting images.

<div class="video-container"><iframe id='iframe2' src="https://www.youtube.com/embed/CUfR819hIDg"></iframe>
</div>

Depending on the settings and optics, it can take high quality 5MP pictures 10 times a second all the way to 640x480 resolution at 90 frames per second. The picture and video are from these two ends of this acquisition spectrum. Limitations in the lenses in this case reduce crisp quality of the full images, but are still spactacular in their own way.  In the end, I installed four of these cameras at various locations around the tokamak, each of which yielding a unique perspective on the world of high-temperature plasma physics.

  <figure>
    <img src="https://raw.githubusercontent.com/icfaust/icfaust.github.io/master/_screenshots/necessary_items.jpg" alt="Necessary Items for a single camera system"/>
    <figcaption>The necessary items needed for an example camera system are shown in this photo.</figcaption>
  </figure>


<h3> Design and manufacture of the camera mounting structure </h3>

Tokamaks are vacuum chambers which are limited in space due to the surrounding magnets and supporting structure. The extreme mechanical and electromagnetic environment leaves little room to view the plasma, and so the optimal placement of cameras is key.  The camera with optics is placed on a printed circuit board ( <a href="https://en.wikipedia.org/wiki/Printed_circuit_board"> 'PCB'</a>) which then can be mounted using a typical <a href="https://en.wikipedia.org/wiki/S-mount_(CCTV_lens)"> 'S-mount'</a>. This small size package is ideal for the tight volume available. 

  <figure>
    <img src="https://raw.githubusercontent.com/icfaust/icfaust.github.io/master/_screenshots/IMG_20150612_134352-nopm-.jpg" alt="Double camera system inserted within a reentrant tube"/>
    <figcaption>The necessary items needed for an example camera system are shown in this photo.</figcaption>
  </figure>

	
  <figure>
    <img src="https://raw.githubusercontent.com/icfaust/icfaust.github.io/master/_screenshots/IMG_20150730_193248427.jpg" alt="Camera mount designed for 2-3/4 in. Conflat flange"/>
    <figcaption>The necessary items needed for an example camera system are shown in this photo.</figcaption>
  </figure>


<h3> Optimization of the optics for individual views </h3>

The standard lens on the Raspberry Pi is ideal for distances greater than one meter with a wide field of view.  The uses of this camera on tokamaks vary from fisheye views to telescopic/focused views, requring alternate optics.  Luckily the PCB was designed to accept other optics, and the choice depends on the desired view. Outside of the optics, the mounting structure can be easily 3D printed and tapped.

The standard optics for the <a href="https://www.raspberrypi.org/products/camera-module-v2/"> 'Raspberry Pi camera'</a> can be removed with a set of pliers, which exposes the underneath CCD. The screw holes on either side of the CCD on the PCB can mount M12 optics. The optics themselves are sized to fit a M12 hole with .5mm pitch (which is really fine, and required for 3D mounting, I bought mine on  <a href="https://www.amazon.com/Metric-Right-Thread-0-5mm-Pitch/dp/B008570NG6"> 'Amazon'</a> or aliexpress).  The M12 optics are typical of CCTV systems and can be easily purchased in all sort of shapes and sizes from manufacturers on Alibaba.  The low cost (less than $20 a piece) and ease of interfacing with the manufacturing makes acquiring optics easy. The hardest part is getting the company representatives to leave you alone afterward.

  <figure>
    <img src="https://raw.githubusercontent.com/icfaust/icfaust.github.io/master/_screenshots/1150624012_udiv_109.jpg" alt="Upper Divertor View during a disruption"/>
    <figcaption>The necessary items needed for an example camera system are shown in this photo.</figcaption>
  </figure>

This was my first foray into buying direct from a factory and I now understand the powerhouse that is Chinese manufacturing.  Shenzhen is not just for cheap knock-offs, but you have access to ravenous sellers willing to sell you just about anything. If you ever want to build a device with a electrical or mechanical interface, that is where to get it.  I think it is inevitable that the creative side of those builders will lead to the next 'must have' or game-changing products.

To set the focus, you simply screw in and out the optics while running the camera on a Raspberry Pi. When it is in focus, use superglue to hold in place.  Typically the M12 lens focus are not very precise, where the quality of focus is usually specified in 'megapixels' (typically less than 5MP). Higher quality lenses are often it is quoted in lines/mm, but the other quality standard is generally used for lower quality CCDs and sensors.  Ultimately the quality of these lenses limit the clarity of full images taken but is relatively inconsequential for lower quality video. The initial image of this page shows the limitation in quality of a full 5MP image.  A newer Raspberry pi camera is capable of taking 8MP images.	

<h3> Isolation of the electrical triggering </h3>

<h3> Coding an interface with the experiment data system </h3>

<h3> Placing power supples away from high magnetic fields </h3>


<ul>
  <li>Point1.</li>
  <li>Point2.</li>
  <li>Point3.</li>
  <li>Point4.</li>
</ul>

Test text2.